<div *ngIf="sessionDto">
  <header class="header">
    <div class="header__titlecomponent">
      <button class="header__back" mat-icon-button aria-label="Button to go back to previous page" color="primary">
        <mat-icon mat-list-icon (click)="openActivityList()">arrow_back</mat-icon>
      </button>
      <h1 class="header__title">Sessão: {{ sessionDto.id }}</h1>
    </div>
    <div class="header__actions" *ngIf="showActions()">
      <button mat-button color="primary" (click)="cancelActivity()">Cancelar</button>
      <button mat-button color="primary" routerLink="edit">Editar</button>
      <button mat-button color="primary" (click)="openDeleteConfirmationDialog()">Excluir</button>
    </div>
    <div class="header__actions" *ngIf="!showActions()">
      <p>Sessão Cancelada</p>
    </div>
  </header>

  <mat-tab-group mat-align-tabs="left" animationDuration="0ms" [selectedIndex]="tabSelectedIndex">
  <mat-tab label="Dados principais">
    <mat-list>
      <mat-list-item>
        <p><b>Id:</b> {{ sessionDto.id }}</p>
      </mat-list-item>
      <mat-list-item>
        <p><b>Vagas:</b> {{ sessionDto.seats }}</p>
      </mat-list-item>
    </mat-list>

    <article class="container">
      <header class="header">
        <h1 class="header__title">Horários</h1>
        <button class="container__actions" mat-button color="primary" routerLink="sub-events/new">Novo Horário</button>
      </header>

      <p *ngIf="!sessionSchedulesDto.length">Nenhum horário cadastrado</p>

      <table mat-table [dataSource]="sessionSchedulesDto" *ngIf="sessionSchedulesDto.length" class="container__table">

        <ng-container matColumnDef="location">
          <th mat-header-cell *matHeaderCellDef>Local / Área / Espaço</th>
          <td mat-cell *matCellDef="let element">
            {{ element.location.name }}
            <span *ngIf="element.area">
                | {{ element.area?.name }}
            </span>
            <span *ngIf="element.space">
                | {{ element.space?.name }}
            </span>
          </td>
        </ng-container>

  <!--      <ng-container matColumnDef="area">-->
  <!--        <th mat-header-cell *matHeaderCellDef>Área</th>-->
  <!--        <td mat-cell *matCellDef="let element"> {{ element.area?.name }} </td>-->
  <!--      </ng-container>-->

  <!--      <ng-container matColumnDef="space">-->
  <!--        <th mat-header-cell *matHeaderCellDef>Espaço</th>-->
  <!--        <td mat-cell *matCellDef="let element"> {{ element.space?.name }} </td>-->
  <!--      </ng-container>-->

        <ng-container matColumnDef="start">
          <th mat-header-cell *matHeaderCellDef>Início</th>
          <td mat-cell *matCellDef="let element"> {{ element.start }} </td>
        </ng-container>

        <ng-container matColumnDef="end">
          <th mat-header-cell *matHeaderCellDef>Fim</th>
          <td mat-cell *matCellDef="let element"> {{ element.end }} </td>
        </ng-container>

        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef>Ações</th>
          <td mat-cell *matCellDef="let row">
            <button mat-icon-button matTooltip="Click to Edit" class="iconbutton" color="primary" (click)="editSessionSchedule(row)">
              <mat-icon aria-label="Edit">edit</mat-icon>
            </button>
            <button mat-icon-button matTooltip="Click to Delete" class="iconbutton" color="warn" (click)="deleteSessionSchedule(row)">
              <mat-icon aria-label="Delete">delete</mat-icon>
            </button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
      </article>
    </mat-tab>

    <mat-tab label="Inscritos">
      <app-registration-list [sessionId]="sessionDto.id"></app-registration-list>
    </mat-tab>

    <mat-tab label="Presença">
      <app-attendance-list [eventId]="eventId" [activityId]="activityId" [sessionId]="sessionId"></app-attendance-list>
    </mat-tab>
  </mat-tab-group>
</div>
