<app-account-page
  pageTitle="Apagar Minha Conta"
  description="Você confirma o apagamento dos seus dados">

  <form id="erase-my-account-form" [formGroup]="form" (ngSubmit)="onSubmit()">

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Senha</mat-label>
      <input matInput [type]="hide ? 'password' : 'text'" formControlName="password" name="password">
      <button class="visibility" mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide">
        <mat-icon color="primary">{{hide ? 'visibility' : 'visibility_off'}}</mat-icon>
      </button>

      <mat-error *ngIf="field('password').invalid && (field('password').dirty || field('password').touched)">

        <mat-error *ngIf="fieldErrors('password')?.['required']">
          Senha é obrigatória
        </mat-error>
        <mat-error *ngIf="fieldErrors('password')?.['minlength']">
          Senha deve ter 8 caracteres no mínimo
        </mat-error>
        <mat-error *ngIf="fieldErrors('password')?.['maxlength']">
          Senha deve ter 64 caracteres no máximo
        </mat-error>
        <mat-error *ngIf="fieldErrors('password')?.['validpassword']">
          Senha deve ser válida
        </mat-error>
      </mat-error>
    </mat-form-field>

    <re-captcha (resolved)="resolved($event)" [siteKey]="recaptchaSiteKey"></re-captcha>
    <mat-card-actions>
      <button class="send-request button-white" mat-raised-button form="erase-my-account-form" color="primary" [disabled]="requestLoading">Enviar Solicitação</button>
      <mat-progress-spinner *ngIf="requestLoading" color="primary" mode="indeterminate" diameter="20"></mat-progress-spinner>
    </mat-card-actions>
  </form>
</app-account-page>
